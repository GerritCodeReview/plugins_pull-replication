{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "6130d5d6_d17fd5b5",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/FetchOneTest.java",
        "patchSetId": 4
      },
      "lineNbr": 238,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2023-03-29T12:00:33Z",
      "side": 1,
      "message": "See my comment al L#701",
      "range": {
        "startLine": 238,
        "startChar": 4,
        "endLine": 238,
        "endChar": 38
      },
      "revId": "aa39163dd270cf557a2da76ebb9dfcd0fa7004cc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "468db060_a3717a1f",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/FetchOneTest.java",
        "patchSetId": 4
      },
      "lineNbr": 238,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-03-29T14:50:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6130d5d6_d17fd5b5",
      "range": {
        "startLine": 238,
        "startChar": 4,
        "endLine": 238,
        "endChar": 38
      },
      "revId": "aa39163dd270cf557a2da76ebb9dfcd0fa7004cc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "496ed07a_48612576",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/FetchOneTest.java",
        "patchSetId": 4
      },
      "lineNbr": 311,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2023-03-29T12:00:33Z",
      "side": 1,
      "message": "There are several tests similar to this one, I wonder if we can use parametrized tests [1].\n\nHere some example in Gerrit [2].\n\n[1]: https://www.baeldung.com/parameterized-tests-junit-5\n[2]: https://cs.bazel.build/search?q\u003dr%3Agerrit+RunWith%5C%28Parameterized\u0026num\u003d50",
      "revId": "aa39163dd270cf557a2da76ebb9dfcd0fa7004cc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec5ca7f4_803ac478",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/FetchOneTest.java",
        "patchSetId": 4
      },
      "lineNbr": 311,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-03-29T16:10:30Z",
      "side": 1,
      "message": "I believe this requires junit 5 yet we are still on junit 4.12 (according to the gerrit/WORKSPACE file). It is entirely possible I am getting this wrong though, but i might need a hand on how to update the version in a safe way given I am new to bazel.",
      "parentUuid": "496ed07a_48612576",
      "revId": "aa39163dd270cf557a2da76ebb9dfcd0fa7004cc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "69d9722c_41ae512c",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/FetchOneTest.java",
        "patchSetId": 4
      },
      "lineNbr": 311,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-03-29T16:23:41Z",
      "side": 1,
      "message": "Hmmm, I may have spoken too soon, should be do-able in junit 4, I will give it a go",
      "parentUuid": "ec5ca7f4_803ac478",
      "revId": "aa39163dd270cf557a2da76ebb9dfcd0fa7004cc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "867f33f5_02b08701",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/FetchOneTest.java",
        "patchSetId": 4
      },
      "lineNbr": 311,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-03-29T16:58:54Z",
      "side": 1,
      "message": "Ok, having read a bit on parameterized tests for junit 4, i think its not a good fit here, because it executes every test for the input data we\u0027ve defined - but our test data setup is different among tests. There are a few tests that would benefit from the parameterized approach, like the one you highlighted, but for this to be worthwhile we would need junit 5 which apparently allows us to parameterize tests individually, rather than as a whole (using the parameterized class runner). \n\nI will be resolving this, but feel free to reopen if I am missing something, but please provide guidance as to how this should be done.",
      "parentUuid": "69d9722c_41ae512c",
      "revId": "aa39163dd270cf557a2da76ebb9dfcd0fa7004cc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "48e1053c_62ba237f",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/FetchOneTest.java",
        "patchSetId": 4
      },
      "lineNbr": 677,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2023-03-29T12:00:33Z",
      "side": 1,
      "message": "From the tests is tricky to understand what is going on in the setup part, you always need to jump in the `setupMock` implementation.\n\nHowever, not sure how to make it clearer. I\u0027d be tempted in repeating the code instead of abstracting it away. WDYT?",
      "range": {
        "startLine": 677,
        "startChar": 15,
        "endLine": 677,
        "endChar": 25
      },
      "revId": "aa39163dd270cf557a2da76ebb9dfcd0fa7004cc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "444793da_0dbba0bc",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/FetchOneTest.java",
        "patchSetId": 4
      },
      "lineNbr": 677,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-03-29T14:50:53Z",
      "side": 1,
      "message": "I\u0027d rather not just repeat the code, I\u0027d prefer to have it abstracted away:\n- The tests are shorter.\n- I doubt having the abstracted code in the test helps with readability and understanding what is going on\n- It is very hard to spot if something is different to the \"standard\" setup\n\nI agree this is not ideal, but I think its more a code smell in how hard it is to properly test this class, rather than the style we\u0027ve written the test.",
      "parentUuid": "48e1053c_62ba237f",
      "range": {
        "startLine": 677,
        "startChar": 15,
        "endLine": 677,
        "endChar": 25
      },
      "revId": "aa39163dd270cf557a2da76ebb9dfcd0fa7004cc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "19c6266e_1ed2b17c",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/FetchOneTest.java",
        "patchSetId": 4
      },
      "lineNbr": 711,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2023-03-29T12:00:33Z",
      "side": 1,
      "message": "I like the idea of abstracting the assertion this way since it makes the test more readable not needing to check what the 2 booleans are for.\n\nI would abstract the other cases in the same way, also to provide consistency.",
      "range": {
        "startLine": 709,
        "startChar": 2,
        "endLine": 711,
        "endChar": 3
      },
      "revId": "aa39163dd270cf557a2da76ebb9dfcd0fa7004cc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ee7babc7_1a80a890",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/FetchOneTest.java",
        "patchSetId": 4
      },
      "lineNbr": 711,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-03-29T14:50:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "19c6266e_1ed2b17c",
      "range": {
        "startLine": 709,
        "startChar": 2,
        "endLine": 711,
        "endChar": 3
      },
      "revId": "aa39163dd270cf557a2da76ebb9dfcd0fa7004cc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6ee9be8f_f53e931c",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/FetchOneTest.java",
        "patchSetId": 4
      },
      "lineNbr": 742,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2023-03-29T12:00:33Z",
      "side": 1,
      "message": "Since the logic in `setupFetchFactoryMock` is not complex and the method quite small, why not moving the logic here and call the method used in the tests `setupFetchFactoryMock` to make it clearer is a mock and avoid the ambiguity of `setupFetchFactoryMock` Vs `setupFetchFactory`?",
      "revId": "aa39163dd270cf557a2da76ebb9dfcd0fa7004cc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8180de78_31d0d65c",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/FetchOneTest.java",
        "patchSetId": 4
      },
      "lineNbr": 742,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-03-29T14:50:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6ee9be8f_f53e931c",
      "revId": "aa39163dd270cf557a2da76ebb9dfcd0fa7004cc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}