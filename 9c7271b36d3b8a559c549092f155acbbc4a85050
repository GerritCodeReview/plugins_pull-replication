{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "89325392_b83bd9db",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-05-26T15:21:13Z",
      "side": 1,
      "message": "I prefer to remove the old `FetchReplicationMetrics.startEnd2End` method - but i have decided to seek your advice here, as its public and I don\u0027t know what might be using it (outside the pull-replication plugin ofc). Not sure how we are supposed to handle such cases, so guidance is appreciated.",
      "revId": "9c7271b36d3b8a559c549092f155acbbc4a85050",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7dcdef4d_12f2f2ce",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/FetchReplicationMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2023-05-29T16:07:28Z",
      "side": 1,
      "message": "I\u0027m not sure if this metric make sense. It\u0027s quite confusing what it shows. If you look at the documentation `replication.syncRefs`[1] by default all fetch operations are triggered synchronously so `replication_end_2_end_latency` shows e2e fetch time, if you decide to add only some refs to the list, for those it will be e2e for others will be fetch task scheduling latency. If you disable sync calls for all refs it will be scheduling time.\n\nhttps://gerrit.googlesource.com/plugins/pull-replication/+/refs/heads/stable-3.4/src/main/resources/Documentation/config.md",
      "range": {
        "startLine": 65,
        "startChar": 13,
        "endLine": 65,
        "endChar": 54
      },
      "revId": "9c7271b36d3b8a559c549092f155acbbc4a85050",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bd51e027_50ff8ed1",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/FetchReplicationMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-05-30T14:12:55Z",
      "side": 1,
      "message": "@Marcin not sure i follow. Did we not say that the method where this metric is updated is always used during the async code path?",
      "parentUuid": "7dcdef4d_12f2f2ce",
      "range": {
        "startLine": 65,
        "startChar": 13,
        "endLine": 65,
        "endChar": 54
      },
      "revId": "9c7271b36d3b8a559c549092f155acbbc4a85050",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7365bd4b_fc5b2431",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/FetchReplicationMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-06-08T09:26:28Z",
      "side": 1,
      "message": "what do you recommend as a name?",
      "parentUuid": "bd51e027_50ff8ed1",
      "range": {
        "startLine": 65,
        "startChar": 13,
        "endLine": 65,
        "endChar": 54
      },
      "revId": "9c7271b36d3b8a559c549092f155acbbc4a85050",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d55481d6_38d5139d",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/FetchReplicationMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2023-06-12T12:15:39Z",
      "side": 1,
      "message": "\u003e Did we not say that the method where this metric is updated is always used during the async code path\n\nAsync/sync fetch call is decided based on replication.syncRefs[1] param and it\u0027s implemented in[2].\n\nI\u0027m not sure if I see benefits of keeping this metric because it can show many different values based on the configuration. In the case where we have part of the refs async and part of them sync it really doesn\u0027t present much value\n\n1. https://gerrit.googlesource.com/plugins/pull-replication/+/refs/heads/stable-3.4/src/main/resources/Documentation/config.md\n\n2. https://gerrit.googlesource.com/plugins/pull-replication/+/refs/heads/stable-3.4/src/main/java/com/googlesource/gerrit/plugins/replication/pull/client/FetchRestApiClient.java#117",
      "parentUuid": "7365bd4b_fc5b2431",
      "range": {
        "startLine": 65,
        "startChar": 13,
        "endLine": 65,
        "endChar": 54
      },
      "revId": "9c7271b36d3b8a559c549092f155acbbc4a85050",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}