{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "415a3300_e754e8a4",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/SourceConfiguration.java",
        "patchSetId": 2
      },
      "lineNbr": 57,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2023-06-28T17:34:50Z",
      "side": 1,
      "message": "nit: remove empty line",
      "revId": "fb0273410b8bccc304df63402780c342aa6a24f3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c0f2c8e9_de7de8c2",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/SourceConfiguration.java",
        "patchSetId": 2
      },
      "lineNbr": 57,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-06-30T10:53:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "415a3300_e754e8a4",
      "revId": "fb0273410b8bccc304df63402780c342aa6a24f3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b9913c47_9eaf240d",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/SourceConfiguration.java",
        "patchSetId": 2
      },
      "lineNbr": 103,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2023-06-28T17:34:50Z",
      "side": 1,
      "message": "we should enable that per source not as a global setting",
      "range": {
        "startLine": 103,
        "startChar": 4,
        "endLine": 103,
        "endChar": 82
      },
      "revId": "fb0273410b8bccc304df63402780c342aa6a24f3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b5a3b0bd_b602b44a",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/SourceConfiguration.java",
        "patchSetId": 2
      },
      "lineNbr": 103,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-06-30T10:53:43Z",
      "side": 1,
      "message": "Can you justify this? To me it feels like a global setting, either all the nodes support batching or they dont. It also simplifies troubleshooting and debugging and makes it easier to reason about what the software is doing. Even for a rolling update, you can gradually update all the nodes to the same version while using apply-objects endpoint, then enable batching endpoint by modifying the replication.config on every node and it will be automatically picked up (if `gerrit.autoReload` is set to true).",
      "parentUuid": "b9913c47_9eaf240d",
      "range": {
        "startLine": 103,
        "startChar": 4,
        "endLine": 103,
        "endChar": 82
      },
      "revId": "fb0273410b8bccc304df63402780c342aa6a24f3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f45626a7_f75f1496",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/SourceConfiguration.java",
        "patchSetId": 2
      },
      "lineNbr": 103,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2023-06-30T18:23:09Z",
      "side": 1,
      "message": "But this is reducing the possibility of doing the rolling upgrade. We cannot enable batch ref event just for a part of the nodes, check if all works fine even move part of the jenkins builds to the new event and then enable it for all the nodes. Also we can have replication between clusters so one cluster can be on old code and other on the new one. With the global setting you have to wait for all the clusters to upgraded",
      "parentUuid": "b5a3b0bd_b602b44a",
      "range": {
        "startLine": 103,
        "startChar": 4,
        "endLine": 103,
        "endChar": 82
      },
      "revId": "fb0273410b8bccc304df63402780c342aa6a24f3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "65fc435d_5c25b42c",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/SourceConfiguration.java",
        "patchSetId": 2
      },
      "lineNbr": 103,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-07-03T10:12:41Z",
      "side": 1,
      "message": "Yeah agreed, i guess my point here is that having it as a global setting reduces complexity and I also assumed that waiting until rolling upgrade is done and then update the config was not a big deal. Let\u0027s wait until more people have had a chance to review, I will give it a few days and if i dont hear back i will change it according to your suggestion üëç",
      "parentUuid": "f45626a7_f75f1496",
      "range": {
        "startLine": 103,
        "startChar": 4,
        "endLine": 103,
        "endChar": 82
      },
      "revId": "fb0273410b8bccc304df63402780c342aa6a24f3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "96e500ff_f86f892e",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/SourceConfiguration.java",
        "patchSetId": 2
      },
      "lineNbr": 103,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-08-09T09:31:11Z",
      "side": 1,
      "message": "I\u0027ve changed it according to your suggestion @Marcin, can you please check and if happy resolve the comment.",
      "parentUuid": "65fc435d_5c25b42c",
      "range": {
        "startLine": 103,
        "startChar": 4,
        "endLine": 103,
        "endChar": 82
      },
      "revId": "fb0273410b8bccc304df63402780c342aa6a24f3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6e8f5bf3_50216a7c",
        "filename": "src/main/resources/Documentation/config.md",
        "patchSetId": 2
      },
      "lineNbr": 329,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2023-06-28T17:34:50Z",
      "side": 1,
      "message": "this should be configurable per source",
      "range": {
        "startLine": 329,
        "startChar": 12,
        "endLine": 329,
        "endChar": 29
      },
      "revId": "fb0273410b8bccc304df63402780c342aa6a24f3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "586e01db_ebb3627f",
        "filename": "src/main/resources/Documentation/config.md",
        "patchSetId": 2
      },
      "lineNbr": 329,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-08-09T09:31:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6e8f5bf3_50216a7c",
      "range": {
        "startLine": 329,
        "startChar": 12,
        "endLine": 329,
        "endChar": 29
      },
      "revId": "fb0273410b8bccc304df63402780c342aa6a24f3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bb8130ab_641c3052",
        "filename": "src/main/resources/Documentation/config.md",
        "patchSetId": 2
      },
      "lineNbr": 333,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2023-06-28T17:34:50Z",
      "side": 1,
      "message": "nit: remove extra characters",
      "range": {
        "startLine": 333,
        "startChar": 56,
        "endLine": 333,
        "endChar": 57
      },
      "revId": "fb0273410b8bccc304df63402780c342aa6a24f3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1e01fa82_eda443a1",
        "filename": "src/main/resources/Documentation/config.md",
        "patchSetId": 2
      },
      "lineNbr": 333,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-06-30T10:53:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bb8130ab_641c3052",
      "range": {
        "startLine": 333,
        "startChar": 56,
        "endLine": 333,
        "endChar": 57
      },
      "revId": "fb0273410b8bccc304df63402780c342aa6a24f3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c4e9a54e_bc5be306",
        "filename": "src/main/resources/Documentation/config.md",
        "patchSetId": 2
      },
      "lineNbr": 337,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2023-06-28T17:34:50Z",
      "side": 1,
      "message": "should default be true. We need that param only during the rolling upgrade or when part of the nodes is on old version. When all nodes are on the same version this param is not needed",
      "range": {
        "startLine": 337,
        "startChar": 11,
        "endLine": 337,
        "endChar": 16
      },
      "revId": "fb0273410b8bccc304df63402780c342aa6a24f3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "10cecd73_df48c8a9",
        "filename": "src/main/resources/Documentation/config.md",
        "patchSetId": 2
      },
      "lineNbr": 337,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-06-30T10:53:43Z",
      "side": 1,
      "message": "ok, but that will require the users to be aware and make sure they set it to false while migrating. How do we communicate this, how can we add it to the release notes?",
      "parentUuid": "c4e9a54e_bc5be306",
      "range": {
        "startLine": 337,
        "startChar": 11,
        "endLine": 337,
        "endChar": 16
      },
      "revId": "fb0273410b8bccc304df63402780c342aa6a24f3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "970bfe6e_1e6d5f2b",
        "filename": "src/main/resources/Documentation/config.md",
        "patchSetId": 2
      },
      "lineNbr": 337,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2023-06-30T18:23:09Z",
      "side": 1,
      "message": "we should mention that in the release notes and in the documentation",
      "parentUuid": "10cecd73_df48c8a9",
      "range": {
        "startLine": 337,
        "startChar": 11,
        "endLine": 337,
        "endChar": 16
      },
      "revId": "fb0273410b8bccc304df63402780c342aa6a24f3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1788f6ab_fd6c8af6",
        "filename": "src/main/resources/Documentation/config.md",
        "patchSetId": 2
      },
      "lineNbr": 337,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-07-03T10:12:41Z",
      "side": 1,
      "message": "If you can point me to the release notes i can add it there",
      "parentUuid": "970bfe6e_1e6d5f2b",
      "range": {
        "startLine": 337,
        "startChar": 11,
        "endLine": 337,
        "endChar": 16
      },
      "revId": "fb0273410b8bccc304df63402780c342aa6a24f3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3b91ad51_066e3df6",
        "filename": "src/main/resources/Documentation/config.md",
        "patchSetId": 2
      },
      "lineNbr": 337,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-08-11T05:58:04Z",
      "side": 1,
      "message": "I\u0027ve added the `Release-Notes` in the description, if that\u0027s not enough please let me know.",
      "parentUuid": "1788f6ab_fd6c8af6",
      "range": {
        "startLine": 337,
        "startChar": 11,
        "endLine": 337,
        "endChar": 16
      },
      "revId": "fb0273410b8bccc304df63402780c342aa6a24f3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}