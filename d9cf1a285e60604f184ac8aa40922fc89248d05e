{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "4277d6c8_5ce31512",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 17,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-20T08:53:34Z",
      "side": 1,
      "message": "It it should not be an _instead-of_ but just the skip of apply-object altogether.\n\nThe apply-object is a performance optimisation, which needs to be skipped in this case because it isn\u0027t applicable.",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 17,
        "endChar": 13
      },
      "revId": "d9cf1a285e60604f184ac8aa40922fc89248d05e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "43cb6383_205e39e4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-20T08:53:34Z",
      "side": 1,
      "message": "This is the wrong logic: the fallback is implemented already, we must just skip the apply object during replay with a simple flag.",
      "revId": "d9cf1a285e60604f184ac8aa40922fc89248d05e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d1397773_4f241a59",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/ReplicationQueue.java",
        "patchSetId": 4
      },
      "lineNbr": 222,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-20T08:53:34Z",
      "side": 1,
      "message": "```suggestion\n    fire(event, state, true);\n```",
      "range": {
        "startLine": 222,
        "startChar": 23,
        "endLine": 222,
        "endChar": 28
      },
      "revId": "d9cf1a285e60604f184ac8aa40922fc89248d05e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "49b5fe91_9bf39b35",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/ReplicationQueue.java",
        "patchSetId": 4
      },
      "lineNbr": 226,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-20T08:53:34Z",
      "side": 1,
      "message": "```suggestion\n      ReferenceUpdatedEvent event, ReplicationState state, boolean runApplyObject) {\n```",
      "range": {
        "startLine": 226,
        "startChar": 67,
        "endLine": 226,
        "endChar": 85
      },
      "revId": "d9cf1a285e60604f184ac8aa40922fc89248d05e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dc1fe9c1_ec7c8a4e",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/ReplicationQueue.java",
        "patchSetId": 4
      },
      "lineNbr": 226,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-11-20T17:21:37Z",
      "side": 1,
      "message": "nit: how about having two methods, `fire` (or `fireViaFetch`) and `fireViaApplyObject`? this way we\u0027ll get rid of that magic _true_ or _false_ at the end. Sure, this is only a private method, but IMO this would make the code easier to understand. WDYT?",
      "parentUuid": "49b5fe91_9bf39b35",
      "range": {
        "startLine": 226,
        "startChar": 67,
        "endLine": 226,
        "endChar": 85
      },
      "revId": "d9cf1a285e60604f184ac8aa40922fc89248d05e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "04035a96_17b66a25",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/ReplicationQueue.java",
        "patchSetId": 4
      },
      "lineNbr": 226,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2023-11-27T13:35:38Z",
      "side": 1,
      "message": "this is more or less what I implemented in patchset 1, plus I\u0027m suggesting that for the parent change as well. But looks like to get +2 we need to follow magic true or false",
      "parentUuid": "dc1fe9c1_ec7c8a4e",
      "range": {
        "startLine": 226,
        "startChar": 67,
        "endLine": 226,
        "endChar": 85
      },
      "revId": "d9cf1a285e60604f184ac8aa40922fc89248d05e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7195f514_e2112111",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/ReplicationQueue.java",
        "patchSetId": 4
      },
      "lineNbr": 226,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-27T15:25:51Z",
      "side": 1,
      "message": "\u003e this is more or less what I implemented in patchset 1\n\nI don\u0027t see any split between `fire` and `fireViaFetch` in PS1: we just need to make sure that the fire for replayed events doesn\u0027t go through apply-object, which is straightforward. Do you want me to propose an alternative patch?\n\nI believe what @dariusz.luksza@gmail.com means is to avoid using _magic_ booleans but rather capture the different behaviour in the method name.\n\n\u003e plus I\u0027m suggesting that for the parent change as well. But looks like to get +2 we need to follow magic true or false\n\nCan you elaborate on the magic? If you\u0027d like to make constants more readable you can just use also enums or self-documenting constants.\n\nExample:\n```java\nprivate static final FIRE_WITH_APPLY_OBJECT \u003d true;\nprivate static final FIRE_WITH_FETCH \u003d false;\n```\n\nThe above would suffice and isn\u0027t magic IMHO.",
      "parentUuid": "04035a96_17b66a25",
      "range": {
        "startLine": 226,
        "startChar": 67,
        "endLine": 226,
        "endChar": 85
      },
      "revId": "d9cf1a285e60604f184ac8aa40922fc89248d05e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "865da419_68876bc6",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/ReplicationQueue.java",
        "patchSetId": 4
      },
      "lineNbr": 264,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-20T08:53:34Z",
      "side": 1,
      "message": "No, the fallback logic isn\u0027t done at this level but down in the `callFunction` implementation.",
      "range": {
        "startLine": 250,
        "startChar": 0,
        "endLine": 264,
        "endChar": 25
      },
      "revId": "d9cf1a285e60604f184ac8aa40922fc89248d05e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6fe24a9d_2c366b1f",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/ReplicationQueue.java",
        "patchSetId": 4
      },
      "lineNbr": 289,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-20T08:53:34Z",
      "side": 1,
      "message": "add the `runApplyObject` parameter here",
      "revId": "d9cf1a285e60604f184ac8aa40922fc89248d05e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a69c9ca8_a37d2fb6",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/ReplicationQueue.java",
        "patchSetId": 4
      },
      "lineNbr": 296,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-20T08:53:34Z",
      "side": 1,
      "message": "```suggestion\n        if (runApplyObject) {\n          callSuccessful \u003d call.call(source);\n        }\n```",
      "revId": "d9cf1a285e60604f184ac8aa40922fc89248d05e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d1f203c4_d6f4ef4b",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/ReplicationQueue.java",
        "patchSetId": 4
      },
      "lineNbr": 296,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-11-20T17:21:37Z",
      "side": 1,
      "message": "nit: I\u0027d put that `if` around the `try-catch` block so that we don\u0027t even enter it when `runApplyObject` is false.",
      "parentUuid": "a69c9ca8_a37d2fb6",
      "revId": "d9cf1a285e60604f184ac8aa40922fc89248d05e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0428f42b_1856dbd6",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/ReplicationQueue.java",
        "patchSetId": 4
      },
      "lineNbr": 306,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-20T08:53:34Z",
      "side": 1,
      "message": "```suggestion\n      if (!runApplyObject || !callSuccessful) {\n```",
      "revId": "d9cf1a285e60604f184ac8aa40922fc89248d05e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}