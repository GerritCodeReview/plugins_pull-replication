{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "e9a2328f_b149f640",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-12-07T15:42:22Z",
      "side": 1,
      "message": "We should actually mention that this change is applicable only on a primary-replica context.",
      "revId": "da7114de4ecd5429d207d2cba97d2020cab2e951",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "99fb7b90_585eeb0e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 10,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-12-07T15:42:22Z",
      "side": 1,
      "message": "nit: properties",
      "range": {
        "startLine": 10,
        "startChar": 60,
        "endLine": 10,
        "endChar": 70
      },
      "revId": "da7114de4ecd5429d207d2cba97d2020cab2e951",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "beb592d7_08d530c2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-12-07T15:42:22Z",
      "side": 1,
      "message": "Please add a test to cover your changes. I have spent a lot of time reading and re-reading the code and the issue to understand what we want to achieve, the code looks simple but it can be tricky to figure out what is allowed and what is not. A test would make this much easier to understand.\n\nI also think that we should either log a warning, or throw an exception, if the primary specifies the `remote.name.fetch` setting in a primary/replica setup. Probably a warning, as we wouldn\u0027t want to impact the users.",
      "revId": "da7114de4ecd5429d207d2cba97d2020cab2e951",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c96593f_120ee5dd",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/SourceConfigParser.java",
        "patchSetId": 2
      },
      "lineNbr": 56,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2023-12-07T13:09:38Z",
      "side": 1,
      "message": "`allFetchRemotes` is already filtering the remotes for just the ones containing a non empty `fetch refspecs`, so filterling this later at L62 is pointless.",
      "range": {
        "startLine": 56,
        "startChar": 4,
        "endLine": 56,
        "endChar": 52
      },
      "revId": "da7114de4ecd5429d207d2cba97d2020cab2e951",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0e1f91e1_bbea19af",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/SourceConfigParser.java",
        "patchSetId": 2
      },
      "lineNbr": 56,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-12-07T15:42:22Z",
      "side": 1,
      "message": "in fact, the way the code is currently written, I dont think you will even go into L57 if the `fetch refspecs` is left empty/undefined. So I think you should (at least) change the logic in `allFetchRemotes`",
      "parentUuid": "4c96593f_120ee5dd",
      "range": {
        "startLine": 56,
        "startChar": 4,
        "endLine": 56,
        "endChar": 52
      },
      "revId": "da7114de4ecd5429d207d2cba97d2020cab2e951",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "06aad24b_54be91a8",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/SourceConfigParser.java",
        "patchSetId": 2
      },
      "lineNbr": 56,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-12-08T10:26:59Z",
      "side": 1,
      "message": "\u003e `allFetchRemotes` is already filtering the remotes for just the ones containing a non empty `fetch refspecs`, so filterling this later at L62 is pointless.\n\nyou\u0027re right @syntonyze@gmail.com, the `allFetchRemotes` should remove all remotes without `refspec`. I don\u0027t know why this ticket was created as that code was there since the `SourceConfigParser` was created in May 2020.\n\nI\u0027m going to abandon this change and hope we can get more details on the ticket.",
      "parentUuid": "0e1f91e1_bbea19af",
      "range": {
        "startLine": 56,
        "startChar": 4,
        "endLine": 56,
        "endChar": 52
      },
      "revId": "da7114de4ecd5429d207d2cba97d2020cab2e951",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "49289b44_ce1af5ea",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/SourceConfigParser.java",
        "patchSetId": 2
      },
      "lineNbr": 62,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2023-12-07T13:09:38Z",
      "side": 1,
      "message": "Allowing pull-replication remotes without any _explicit_ `fetch refsSpec` is going to implicitly cause them to be loaded by the push-replication:\n\nThe push replication ignores any `fetch` remote [1] only when a `fetch` exists.\nIf no `fetch` exists it will imply a push with `refs/*:refs/*` refsSpecs [2].\n\nThis might be dangerous and unwanted.\n \n[1] https://gerrit.googlesource.com/plugins/replication/+/refs/heads/stable-3.5/src/main/java/com/googlesource/gerrit/plugins/replication/DestinationConfigParser.java#59\n\n[2] https://gerrit.googlesource.com/plugins/replication/+/refs/heads/stable-3.5/src/main/java/com/googlesource/gerrit/plugins/replication/DestinationConfigParser.java#71",
      "revId": "da7114de4ecd5429d207d2cba97d2020cab2e951",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2c4d5233_64251edf",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/SourceConfigParser.java",
        "patchSetId": 2
      },
      "lineNbr": 62,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-12-07T15:42:22Z",
      "side": 1,
      "message": "The config is so badly designed, that it blows my mind. Look at how a change in pull replication config can actually affect push replication, and thankfully you spotted it, because it is very easy to go unnoticed. Why can\u0027t we simply have a push and a pull replication section in the config file? That would simplify everything.",
      "parentUuid": "49289b44_ce1af5ea",
      "revId": "da7114de4ecd5429d207d2cba97d2020cab2e951",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ],
  "submitRequirementResults": [
    {
      "submitRequirement": {
        "name": "Code-Review",
        "description": {
          "value": "At least one maximum vote for label \u0027Code-Review\u0027 is required"
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Code-Review\u003dMAX,user\u003dnon_uploader AND -label:Code-Review\u003dMIN"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Code-Review=MAX,user=non_uploader AND -label:Code-Review=MIN"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Code-Review=MAX,user=non_uploader","label:Code-Review=MIN"]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "da7114de4ecd5429d207d2cba97d2020cab2e951",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Do-Not-Submit",
        "description": {
          "value": "Changes that have DO NOT SUBMIT in their commit message are not submittable."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "message:\"^.*(D|d)(O|o) (N|n)(O|o)(T|t) (S|s)(U|u)(B|b)(M|m)(I|i)(T|t).*\""
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:false"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"message:\"^.*(D|d)(O|o) (N|n)(O|o)(T|t) (S|s)(U|u)(B|b)(M|m)(I|i)(T|t).*\""},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["message:\"^.*(D|d)(O|o) (N|n)(O|o)(T|t) (S|s)(U|u)(B|b)(M|m)(I|i)(T|t).*\""]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:false"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "da7114de4ecd5429d207d2cba97d2020cab2e951",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "No-Unresolved-Comments",
        "description": {
          "value": "Changes that have unresolved comments are not submittable. Unless overriden by adding the hashtag allow-unresolved-comments."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "has:unresolved"
          }
        },
        "submittabilityExpression": {
          "expressionString": "-has:unresolved"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "hashtag:allow-unresolved-comments"
          }
        },
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"has:unresolved"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["has:unresolved"],"failingAtoms":[]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"-has:unresolved"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":["has:unresolved"],"failingAtoms":[]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"hashtag:allow-unresolved-comments"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["hashtag:allow-unresolved-comments"]}
      },
      "patchSetCommitId": "da7114de4ecd5429d207d2cba97d2020cab2e951",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Review-Enforcement",
        "description": {
          "value": "Two Google employees must approve the change. Uploading the change or voting positively on Code-Review count as approval."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "is:review-enforced_gerrit"
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:review-enforcement-satisfied_gerrit"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforced_gerrit"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["is:review-enforced_gerrit"]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforcement-satisfied_gerrit"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "da7114de4ecd5429d207d2cba97d2020cab2e951",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Verified",
        "description": {
          "value": "CI result status for build and tests is passing"
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "-branch:refs/meta/config"
          }
        },
        "submittabilityExpression": {
          "expressionString": "label:Verified\u003dMAX AND -label:Verified\u003dMIN"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"-branch:refs/meta/config"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["branch:refs/meta/config"]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Verified=MAX AND -label:Verified=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Verified=MAX"],"failingAtoms":["label:Verified=MIN"]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "da7114de4ecd5429d207d2cba97d2020cab2e951",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    }
  ]
}