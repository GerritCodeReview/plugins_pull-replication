{
  "comments": [
    {
      "key": {
        "uuid": "00e9178e_30bf6c06",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/api/FetchAction.java",
        "patchSetId": 7
      },
      "lineNbr": 68,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2020-01-23T12:28:29Z",
      "side": 1,
      "message": "I initially thought the url was the only unique ID in the replication configuration, but I am not sure anymore üòê\n\nFor example, the way we name urls in the gerrithub multisite setup doesn\u0027t enforce the urls to be unique identifier of a server in the cluster.\n\nWe could modify it and make the urls unique identifiers, but we should probably clearly mention it in the documentation, i.e.: if you are using fetch-replication make sure the urls are unique identifier in the cluster.\n\nAlso we are implying that the node calling the API to trigger the fetch knows how it has been named in the replication config of the remote node. \n\nI think we can maybe make this assumption as a starting point, but:\n* we need to make it clear in the documentation\n* we could use labels for the lookup since anyway we need to enforce a unique id\n\n\nWDYT? Am I missing something?",
      "range": {
        "startLine": 68,
        "startChar": 36,
        "endLine": 68,
        "endChar": 39
      },
      "revId": "54e2c71c70dcc4081bba7f25be094190aa28074c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "84d94530_424a72bf",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/api/FetchAction.java",
        "patchSetId": 7
      },
      "lineNbr": 68,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2020-01-29T16:18:57Z",
      "side": 1,
      "message": "After discussion with Luca we decided to use label",
      "parentUuid": "00e9178e_30bf6c06",
      "range": {
        "startLine": 68,
        "startChar": 36,
        "endLine": 68,
        "endChar": 39
      },
      "revId": "54e2c71c70dcc4081bba7f25be094190aa28074c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "928aefee_a6b3bf86",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/api/FetchAction.java",
        "patchSetId": 7
      },
      "lineNbr": 68,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2020-01-29T16:22:44Z",
      "side": 1,
      "message": "Makes sense. If we don\u0027t care about discoverability for the time being it is the easiest lookup way.",
      "parentUuid": "84d94530_424a72bf",
      "range": {
        "startLine": 68,
        "startChar": 36,
        "endLine": 68,
        "endChar": 39
      },
      "revId": "54e2c71c70dcc4081bba7f25be094190aa28074c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bb2eb01c_8093d20c",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/api/FetchService.java",
        "patchSetId": 7
      },
      "lineNbr": 53,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2020-01-23T12:28:29Z",
      "side": 1,
      "message": "Is this just a warning or an error? If we cannot replicate because of configuration issue I think we should be more verbose.",
      "range": {
        "startLine": 53,
        "startChar": 20,
        "endLine": 53,
        "endChar": 24
      },
      "revId": "54e2c71c70dcc4081bba7f25be094190aa28074c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1e93bbeb_9e324b08",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/api/FetchService.java",
        "patchSetId": 7
      },
      "lineNbr": 53,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2020-01-24T11:22:02Z",
      "side": 1,
      "message": "I\u0027m not sure, we can have situation when we don\u0027t want to replicate from some node so we are not including it in the configuration. In this case we will just notify that we haven\u0027t replicated",
      "parentUuid": "bb2eb01c_8093d20c",
      "range": {
        "startLine": 53,
        "startChar": 20,
        "endLine": 53,
        "endChar": 24
      },
      "revId": "54e2c71c70dcc4081bba7f25be094190aa28074c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c373e8de_b7c0671b",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/api/FetchService.java",
        "patchSetId": 7
      },
      "lineNbr": 53,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2020-01-29T17:22:53Z",
      "side": 1,
      "message": "I believe that if we requested a node to fetch, giving a source label *and* that source doesn\u0027t exist in the remote, we should return an error to the client, letting him know that the operation has failed.",
      "parentUuid": "1e93bbeb_9e324b08",
      "range": {
        "startLine": 53,
        "startChar": 20,
        "endLine": 53,
        "endChar": 24
      },
      "revId": "54e2c71c70dcc4081bba7f25be094190aa28074c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2a3f2ddf_f66b199b",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/api/FetchService.java",
        "patchSetId": 7
      },
      "lineNbr": 58,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2020-01-23T12:28:29Z",
      "side": 1,
      "message": "What does it mean if it is null? It seems like we always return a Future",
      "range": {
        "startLine": 58,
        "startChar": 8,
        "endLine": 58,
        "endChar": 14
      },
      "revId": "54e2c71c70dcc4081bba7f25be094190aa28074c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "735a1651_ef992b1d",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/api/FetchService.java",
        "patchSetId": 7
      },
      "lineNbr": 58,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2020-01-24T11:22:02Z",
      "side": 1,
      "message": "You are right I\u0027ve change the schedule method to always return future but I forgot to remove this if",
      "parentUuid": "2a3f2ddf_f66b199b",
      "range": {
        "startLine": 58,
        "startChar": 8,
        "endLine": 58,
        "endChar": 14
      },
      "revId": "54e2c71c70dcc4081bba7f25be094190aa28074c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ccd108e_bda1a712",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/api/FetchService.java",
        "patchSetId": 7
      },
      "lineNbr": 58,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2020-01-29T16:18:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "735a1651_ef992b1d",
      "range": {
        "startLine": 58,
        "startChar": 8,
        "endLine": 58,
        "endChar": 14
      },
      "revId": "54e2c71c70dcc4081bba7f25be094190aa28074c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "68b9fff7_13ac61ec",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/api/FetchServiceTest.java",
        "patchSetId": 7
      },
      "lineNbr": 64,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2020-01-23T12:28:29Z",
      "side": 1,
      "message": "Shall we make this a fixture constant? Like SHA1_TO_FETCH or something similar?",
      "range": {
        "startLine": 64,
        "startChar": 39,
        "endLine": 64,
        "endChar": 79
      },
      "revId": "54e2c71c70dcc4081bba7f25be094190aa28074c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bbc6c97a_34f444bb",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/api/FetchServiceTest.java",
        "patchSetId": 7
      },
      "lineNbr": 64,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2020-01-24T11:22:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "68b9fff7_13ac61ec",
      "range": {
        "startLine": 64,
        "startChar": 39,
        "endLine": 64,
        "endChar": 79
      },
      "revId": "54e2c71c70dcc4081bba7f25be094190aa28074c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}