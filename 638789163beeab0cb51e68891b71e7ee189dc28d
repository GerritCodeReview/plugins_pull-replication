{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d82b355b_5d079baf",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/api/BearerAuthenticationFilter.java",
        "patchSetId": 5
      },
      "lineNbr": 87,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2022-12-28T13:19:13Z",
      "side": 1,
      "message": "nit: I\u0027d call it `isPluginRequest` to stick with the convention used to name the other methods.",
      "range": {
        "startLine": 87,
        "startChar": 51,
        "endLine": 87,
        "endChar": 68
      },
      "revId": "638789163beeab0cb51e68891b71e7ee189dc28d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "002e3d32_d8f90e9f",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/api/BearerAuthenticationFilter.java",
        "patchSetId": 5
      },
      "lineNbr": 87,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2022-12-28T14:45:18Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "d82b355b_5d079baf",
      "range": {
        "startLine": 87,
        "startChar": 51,
        "endLine": 87,
        "endChar": 68
      },
      "revId": "638789163beeab0cb51e68891b71e7ee189dc28d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5c52c03d_4e166b46",
        "filename": "src/main/java/org/eclipse/jgit/transport/TransportHttpWithBearerToken.java",
        "patchSetId": 5
      },
      "lineNbr": 54,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2022-12-28T13:19:13Z",
      "side": 1,
      "message": "Why not use injection here as well? As you did for the `TransportProvider`?",
      "range": {
        "startLine": 54,
        "startChar": 56,
        "endLine": 54,
        "endChar": 73
      },
      "revId": "638789163beeab0cb51e68891b71e7ee189dc28d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fbaf3cb3_0546cf74",
        "filename": "src/main/java/org/eclipse/jgit/transport/TransportHttpWithBearerToken.java",
        "patchSetId": 5
      },
      "lineNbr": 54,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2022-12-28T14:45:18Z",
      "side": 1,
      "message": "Makes sense, let me see how to do it because the instance of `TransportHttpWithBearerToken` is created in the TransportProvided with `new`.",
      "parentUuid": "5c52c03d_4e166b46",
      "range": {
        "startLine": 54,
        "startChar": 56,
        "endLine": 54,
        "endChar": 73
      },
      "revId": "638789163beeab0cb51e68891b71e7ee189dc28d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "77e25457_4f1fbc13",
        "filename": "src/main/java/org/eclipse/jgit/transport/TransportHttpWithBearerToken.java",
        "patchSetId": 5
      },
      "lineNbr": 54,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2022-12-29T09:55:12Z",
      "side": 1,
      "message": "done",
      "parentUuid": "fbaf3cb3_0546cf74",
      "range": {
        "startLine": 54,
        "startChar": 56,
        "endLine": 54,
        "endChar": 73
      },
      "revId": "638789163beeab0cb51e68891b71e7ee189dc28d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ed605c24_4c4bbaac",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/api/BearerAuthenticationFilterTest.java",
        "patchSetId": 5
      },
      "lineNbr": 113,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2022-12-28T13:19:13Z",
      "side": 1,
      "message": "Packet -\u003e Pack",
      "range": {
        "startLine": 113,
        "startChar": 46,
        "endLine": 113,
        "endChar": 51
      },
      "revId": "638789163beeab0cb51e68891b71e7ee189dc28d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2c3d3500_9f9062bb",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/api/BearerAuthenticationFilterTest.java",
        "patchSetId": 5
      },
      "lineNbr": 113,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2022-12-28T14:45:18Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "ed605c24_4c4bbaac",
      "range": {
        "startLine": 113,
        "startChar": 46,
        "endLine": 113,
        "endChar": 51
      },
      "revId": "638789163beeab0cb51e68891b71e7ee189dc28d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d215a432_0128628e",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/api/BearerAuthenticationFilterTest.java",
        "patchSetId": 5
      },
      "lineNbr": 125,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2022-12-28T13:19:13Z",
      "side": 1,
      "message": "Packet -\u003e Pack",
      "range": {
        "startLine": 125,
        "startChar": 46,
        "endLine": 125,
        "endChar": 52
      },
      "revId": "638789163beeab0cb51e68891b71e7ee189dc28d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b7cdf90a_be6e4a7e",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/api/BearerAuthenticationFilterTest.java",
        "patchSetId": 5
      },
      "lineNbr": 125,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2022-12-28T14:45:18Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "d215a432_0128628e",
      "range": {
        "startLine": 125,
        "startChar": 46,
        "endLine": 125,
        "endChar": 52
      },
      "revId": "638789163beeab0cb51e68891b71e7ee189dc28d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d255eafb_bc8a8e1f",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/api/BearerAuthenticationFilterTest.java",
        "patchSetId": 5
      },
      "lineNbr": 138,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2022-12-28T13:19:13Z",
      "side": 1,
      "message": "Why `2` ? It might be worth adding a comment about why we are expecting 2 calls.",
      "range": {
        "startLine": 138,
        "startChar": 37,
        "endLine": 138,
        "endChar": 38
      },
      "revId": "638789163beeab0cb51e68891b71e7ee189dc28d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "49e409a5_9d9e1d4e",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/api/BearerAuthenticationFilterTest.java",
        "patchSetId": 5
      },
      "lineNbr": 138,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2022-12-28T14:45:18Z",
      "side": 1,
      "message": "The code calls `getRequestURI()` 2:\n1.- at the beginning of the class L82 to help checking if the url is isBasicAuthenticationRequest or isPullReplicationApiRequest\n2. In isGitUploadPackRequest L106 to check if the request is upload-pack. \n\nIt was convenience for readability to call `getRequestURI()` once.\n\nI dont think that is worth to add a comment in the test for this. The fact of using mocks and verify them sometimes make the code not clear enough.",
      "parentUuid": "d255eafb_bc8a8e1f",
      "range": {
        "startLine": 138,
        "startChar": 37,
        "endLine": 138,
        "endChar": 38
      },
      "revId": "638789163beeab0cb51e68891b71e7ee189dc28d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "13d69e1e_84cc43d8",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/api/BearerAuthenticationFilterTest.java",
        "patchSetId": 5
      },
      "lineNbr": 138,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2022-12-28T15:51:51Z",
      "side": 1,
      "message": "I see. I wonder if it makes sense to do that assertion at all. I believe the assertion at L#139 might be enough.\n\nImagine if we were to add another check in the code calling the `getRequestURI`. The test would fail even if the behaviour is still ok, i.e.: we are still calling the filter downstream.  WDYT?",
      "parentUuid": "49e409a5_9d9e1d4e",
      "range": {
        "startLine": 138,
        "startChar": 37,
        "endLine": 138,
        "endChar": 38
      },
      "revId": "638789163beeab0cb51e68891b71e7ee189dc28d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5e9fa230_1b6ca135",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/api/BearerAuthenticationFilterTest.java",
        "patchSetId": 5
      },
      "lineNbr": 138,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2022-12-28T16:52:52Z",
      "side": 1,
      "message": "I am happy to remove it but then i want to check that the Authorization header has not been read which means that that flow has not been taken:\n\n```\n    verify(httpServletRequest, never()).getHeader(\"Authorization\");\n\n```\n\nwdyt?",
      "parentUuid": "13d69e1e_84cc43d8",
      "range": {
        "startLine": 138,
        "startChar": 37,
        "endLine": 138,
        "endChar": 38
      },
      "revId": "638789163beeab0cb51e68891b71e7ee189dc28d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1c530c5f_18e4b54d",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/api/BearerAuthenticationFilterTest.java",
        "patchSetId": 5
      },
      "lineNbr": 138,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2022-12-28T17:53:20Z",
      "side": 1,
      "message": "Yep, makes sense to me",
      "parentUuid": "5e9fa230_1b6ca135",
      "range": {
        "startLine": 138,
        "startChar": 37,
        "endLine": 138,
        "endChar": 38
      },
      "revId": "638789163beeab0cb51e68891b71e7ee189dc28d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ac457155_1e697686",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/api/BearerAuthenticationFilterTest.java",
        "patchSetId": 5
      },
      "lineNbr": 138,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2022-12-29T08:43:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1c530c5f_18e4b54d",
      "range": {
        "startLine": 138,
        "startChar": 37,
        "endLine": 138,
        "endChar": 38
      },
      "revId": "638789163beeab0cb51e68891b71e7ee189dc28d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}