{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "517190bd_96f0ddab",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-12-29T12:04:38Z",
      "side": 1,
      "message": "IMO, this would be all good when we expect those plugins to clean caches, or do other \"administrative\" work, but in case when they would modify the repository content (eg. create new refs or commits in the `meta` namespace) this may lead to conflicts.\n\nImagine a situation when the multi-site plugin creates `refs/meta/multisite` on multiple nodes. then when replication kicks in we\u0027ll get conflicts.\n\nWe don\u0027t know what this event is used by all of the plugins out there, maybe this should be configurable behaviour to propagate this event?",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 62
      },
      "revId": "dc888e594a27f18c223f2e750484794ca6c01122",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4aa8c530_6dafa0f1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-12-29T12:06:10Z",
      "side": 1,
      "message": "at least we should mark this as breaking(?) change... or some sort of warning in the \"release notes\"",
      "parentUuid": "517190bd_96f0ddab",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 62
      },
      "revId": "dc888e594a27f18c223f2e750484794ca6c01122",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "767572d2_55fbce13",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-12-29T13:11:22Z",
      "side": 1,
      "message": "\u003e In case when they would modify the repository content (eg. create new refs or commits in the meta namespace) this may lead to conflicts.\n\nWell, they will also receive the information about the instance-id of the event so can differentiate between events created by a user-initiated creation rather than replication-created one.\n\n\u003e Imagine a situation when the multi-site plugin creates refs/meta/multisite on multiple nodes. then when replication kicks in we\u0027ll get conflicts.\n\nThat\u0027s an hypothetical situation that does not happen at the moment. The multi-site has protection against split-brain anyway, should this bug be introduced in the multi-site code.\n\n\u003e We don\u0027t know what this event is used by all of the plugins out there, maybe this should be configurable behaviour to propagate this event?\n\nNot propagating the creation is the bug we are fixing here. Do you have a real example of when this is a problem? \n\nP.S. This is not a core plugin of Gerrit Code Review and isn\u0027t mentioned in the release notes.",
      "parentUuid": "4aa8c530_6dafa0f1",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 62
      },
      "revId": "dc888e594a27f18c223f2e750484794ca6c01122",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "910ae964_2b3817b3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-12-29T13:57:40Z",
      "side": 1,
      "message": "\u003e Well, they will also receive the information about the instance-id of the event so can differentiate between events created by a user-initiated creation rather than replication-created one.\n\nThere\u0027s another [change](https://gerrit-review.googlesource.com/c/plugins/multi-site/+/399617) for the `multi-site` plugin that uses `instanceId` to ignore project created events. Based on that I think that _others_ may also need similar updates.\n\n\u003e Not propagating the creation is the bug we are fixing here. Do you have a real example of when this is a problem?\n\nNo, I don\u0027t have real-world examples, just an itch that this could be problematic.\n\nI don\u0027t know if there\u0027s a good solution for this, as the `replication` plugin does not have the release notes. I also feel a good practice to not break others\u0027 stuff, but we don\u0027t have a good way of communicating such changes... maybe a simple announcement on the repo-discuss is the best what we could do.\n\nI may also over-estimating the impact of this change ;)",
      "parentUuid": "767572d2_55fbce13",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 62
      },
      "revId": "dc888e594a27f18c223f2e750484794ca6c01122",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fdc10b91_a1eb94c8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 11,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-12-29T12:04:38Z",
      "side": 1,
      "message": "nit: how about: _projects create d via replication, which lead to unpredictable consequences_",
      "range": {
        "startLine": 10,
        "startChar": 66,
        "endLine": 11,
        "endChar": 62
      },
      "revId": "dc888e594a27f18c223f2e750484794ca6c01122",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fbac7b64_97e47818",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/api/ProjectInitializationAction.java",
        "patchSetId": 4
      },
      "lineNbr": 251,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-12-28T12:09:40Z",
      "side": 1,
      "message": "nit: private",
      "revId": "dc888e594a27f18c223f2e750484794ca6c01122",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0173a0aa_c4f7ce0a",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/api/ProjectInitializationAction.java",
        "patchSetId": 4
      },
      "lineNbr": 251,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-12-28T12:09:40Z",
      "side": 1,
      "message": "Why extends `AbstractNoNotifyEvent`?",
      "revId": "dc888e594a27f18c223f2e750484794ca6c01122",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "af8f176b_e43ca8be",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/api/ProjectInitializationAction.java",
        "patchSetId": 4
      },
      "lineNbr": 251,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-12-28T12:44:20Z",
      "side": 1,
      "message": "Because i copied the only other logic I could find that creates a similar event - see [1].\n\nI dont know what its purpose is so feel free to suggest if you think its wrong.\n\n[1]\nhttps://gerrit.googlesource.com/gerrit/+/refs/heads/master/java/com/google/gerrit/server/project/ProjectCreator.java#257",
      "parentUuid": "0173a0aa_c4f7ce0a",
      "revId": "dc888e594a27f18c223f2e750484794ca6c01122",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c448b34e_29d46688",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/api/ProjectInitializationAction.java",
        "patchSetId": 4
      },
      "lineNbr": 251,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-12-28T12:50:57Z",
      "side": 1,
      "message": "I don\u0027t know if it is wrong, it was curiosity. Maybe @ponch78@gmail.com can help us with that.",
      "parentUuid": "af8f176b_e43ca8be",
      "revId": "dc888e594a27f18c223f2e750484794ca6c01122",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0c92ee03_d7bf781f",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/api/ProjectInitializationAction.java",
        "patchSetId": 4
      },
      "lineNbr": 251,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-12-29T13:11:22Z",
      "side": 1,
      "message": "The incoming API does not support the notification options of `NotifyHandling` therefore the `NoNotify` in the abstract class name.\n\nThe choice is therefore correct.",
      "parentUuid": "c448b34e_29d46688",
      "revId": "dc888e594a27f18c223f2e750484794ca6c01122",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}