{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "715b6e59_83d9546e",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/PullReplicationHealthCheckIT.java",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T19:19:48Z",
      "side": 1,
      "message": "I do not see how the new feature is tested in the IT test.",
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "45bbee36_95568eab",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/PullReplicationHealthCheckIT.java",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T22:21:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "715b6e59_83d9546e",
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dffb13dd_44ef1c07",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/PullReplicationHealthCheckIT.java",
        "patchSetId": 6
      },
      "lineNbr": 194,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T19:47:41Z",
      "side": 1,
      "message": "I see you\u0027re not configuring any `periodOfTime` explicitly, therefore this would last for 10 seconds.\n\nHowever, imagine that the `periodOfTime` isn\u0027t working, there are no assertions here to say that the check was successful only after that time, or am I missing something?",
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d7f71c26_3cb5dc09",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/PullReplicationHealthCheckIT.java",
        "patchSetId": 6
      },
      "lineNbr": 194,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T22:21:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dffb13dd_44ef1c07",
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c45ff36e_55f1d973",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 57,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T19:19:48Z",
      "side": 1,
      "message": "This would automatically increment by `periodOfTimeMillis + 1` every time that the time is checked; however, the test does not know (or well, it should not assume) how many times the implementation would query the time.\n\nThe tests would have more chances to continue to work with evolutions in the implementations if the tick advance is done explicitly in every test.",
      "range": {
        "startLine": 57,
        "startChar": 23,
        "endLine": 57,
        "endChar": 86
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5fb86c38_36c935d8",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 57,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T22:21:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c45ff36e_55f1d973",
      "range": {
        "startLine": 57,
        "startChar": 23,
        "endLine": 57,
        "endChar": 86
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b66c2b0c_d26e23f2",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 77,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T19:19:48Z",
      "side": 1,
      "message": "```suggestion\n    assertThat(check.getPeriodOfTimeNanos()).isEqualTo(TimeUnit.MILLISECONDS.toNanos(periodOfTimeMillis));\n```",
      "range": {
        "startLine": 77,
        "startChar": 55,
        "endLine": 77,
        "endChar": 83
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bc4af097_f816083d",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 77,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T22:21:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b66c2b0c_d26e23f2",
      "range": {
        "startLine": 77,
        "startChar": 55,
        "endLine": 77,
        "endChar": 83
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b960329b_ffe28241",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 91,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T19:19:48Z",
      "side": 1,
      "message": "Why was this changed from `3` to `4`? Is this possibly due to the times that the FakeTicket is checked by the implementation and therefore the way it advances?",
      "range": {
        "startLine": 91,
        "startChar": 54,
        "endLine": 91,
        "endChar": 55
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "12712556_de7c1eaa",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 91,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T22:18:46Z",
      "side": 1,
      "message": "I see, that is caused by the `periodOfTimeMillisStr` at L86, which makes the test passing after yet another cycle.\n\nThis test isn\u0027t explicitly dedicated to checking the `periodOfTime` functionality, hence should remain unchanged.",
      "parentUuid": "b960329b_ffe28241",
      "range": {
        "startLine": 91,
        "startChar": 54,
        "endLine": 91,
        "endChar": 55
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bd22f502_dc0f7ecc",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 91,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T22:21:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "12712556_de7c1eaa",
      "range": {
        "startLine": 91,
        "startChar": 54,
        "endLine": 91,
        "endChar": 55
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e7d565ef_f3871e34",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 110,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T19:19:48Z",
      "side": 1,
      "message": "Same question as above, I don\u0027t get the rationale behind the number `4` compared to `3` that we had before.",
      "range": {
        "startLine": 110,
        "startChar": 54,
        "endLine": 110,
        "endChar": 55
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2fdd72d9_10b5dbc4",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 110,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T22:18:46Z",
      "side": 1,
      "message": "I see, that is caused by the `periodOfTimeMillisStr` at L106, which makes the test passing after yet another cycle.\n\nThis test isn\u0027t explicitly dedicated to checking the `periodOfTime` functionality, hence should remain unchanged.",
      "parentUuid": "e7d565ef_f3871e34",
      "range": {
        "startLine": 110,
        "startChar": 54,
        "endLine": 110,
        "endChar": 55
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4a442770_ce5c8875",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 110,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T22:21:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2fdd72d9_10b5dbc4",
      "range": {
        "startLine": 110,
        "startChar": 54,
        "endLine": 110,
        "endChar": 55
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9b715203_7011c83e",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 131,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T19:19:48Z",
      "side": 1,
      "message": "Why has also this be incremented from `5` to `6`?",
      "range": {
        "startLine": 131,
        "startChar": 54,
        "endLine": 131,
        "endChar": 55
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4e940c43_264b6bdd",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 131,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T22:18:46Z",
      "side": 1,
      "message": "I see, that is caused by the `periodOfTimeMillisStr` at L127, which makes the test passing after yet another cycle.\n\nThis test isn\u0027t explicitly dedicated to checking the `periodOfTime` functionality, hence should remain unchanged.",
      "parentUuid": "9b715203_7011c83e",
      "range": {
        "startLine": 131,
        "startChar": 54,
        "endLine": 131,
        "endChar": 55
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4bb251fe_196f8f3d",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 131,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T22:21:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4e940c43_264b6bdd",
      "range": {
        "startLine": 131,
        "startChar": 54,
        "endLine": 131,
        "endChar": 55
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e5f187f2_548f0e76",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 144,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T19:19:48Z",
      "side": 1,
      "message": "There is too much _magic_ in this test:\n- The `50 ms` is actually `periodOfTime` * 5 but isn\u0027t explicit for the reader\n- The `5` at L152 is the factor of `periodOfTime` to obtain  the `50 ms`, but again it implicit\n\nCan you make those magic numbers more readable?\n\nThe test isn\u0027t tested and therefore only its clarify can tell the reader if that\u0027s right or wrong.",
      "range": {
        "startLine": 144,
        "startChar": 38,
        "endLine": 144,
        "endChar": 40
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9476c08b_95002dde",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 144,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T22:18:46Z",
      "side": 1,
      "message": "If we set `checkInterval \u003d healthCheckPeriodOfTime / numChecks` then we do not need 5 checks but 3 would suffice, because the mock at L145 is configured to return 3 different values.",
      "parentUuid": "e5f187f2_548f0e76",
      "range": {
        "startLine": 144,
        "startChar": 38,
        "endLine": 144,
        "endChar": 40
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6871744f_412d644b",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 144,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T22:21:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9476c08b_95002dde",
      "range": {
        "startLine": 144,
        "startChar": 38,
        "endLine": 144,
        "endChar": 40
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8dcc4545_16f63c86",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 148,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T19:19:48Z",
      "side": 1,
      "message": "nit: can be inlined at L150.\n\nAlso the `testInjector(new TestModule(List.of(), \u003cperiod of time\u003e)).getInstance()` pattern could be DRY-ed out.",
      "range": {
        "startLine": 148,
        "startChar": 13,
        "endLine": 148,
        "endChar": 21
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "daea847d_20a4fc7f",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 152,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T22:18:46Z",
      "side": 1,
      "message": "This should be a named variable and used to calculate the check interval for advancing the `fakeTicker`. From my calculations, `3` is enough to demonstrate that the feature works.",
      "range": {
        "startLine": 152,
        "startChar": 54,
        "endLine": 152,
        "endChar": 55
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9f7705af_ea07bd5c",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 152,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T22:21:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "daea847d_20a4fc7f",
      "range": {
        "startLine": 152,
        "startChar": 54,
        "endLine": 152,
        "endChar": 55
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4f442267_bc69b9aa",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 154,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T22:18:46Z",
      "side": 1,
      "message": "We are also missing an assertion on the timer, saying that the time passed was over the `periodOfTime` configured.",
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "283fb254_045ba15c",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 154,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T22:21:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4f442267_bc69b9aa",
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ff1af752_615b9fb4",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 160,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T19:19:48Z",
      "side": 1,
      "message": "This pattern is used multiple times, can be DRY-ed out and made it more readable?\n\n\n```suggestion\n    mockSourceWithNoOutstandingTasks(source);\n```",
      "range": {
        "startLine": 159,
        "startChar": 0,
        "endLine": 160,
        "endChar": 53
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "487cf89d_a552d1d8",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 160,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T22:21:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ff1af752_615b9fb4",
      "range": {
        "startLine": 159,
        "startChar": 0,
        "endLine": 160,
        "endChar": 53
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "48e2f2c1_08783150",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 174,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T19:19:48Z",
      "side": 1,
      "message": "Same as above.",
      "range": {
        "startLine": 173,
        "startChar": 0,
        "endLine": 174,
        "endChar": 53
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6a6f29fc_5178e864",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/replication/pull/health/PullReplicationTasksHealthCheckTest.java",
        "patchSetId": 6
      },
      "lineNbr": 174,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-02-06T22:21:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "48e2f2c1_08783150",
      "range": {
        "startLine": 173,
        "startChar": 0,
        "endLine": 174,
        "endChar": 53
      },
      "revId": "abe958907a38b393bba833e23f6f88fb76959f69",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}