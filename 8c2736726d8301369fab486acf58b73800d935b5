{
  "comments": [
    {
      "key": {
        "uuid": "4173ee3b_7ae0b8b4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2020-07-03T08:53:03Z",
      "side": 1,
      "message": "Is it too tricky to add some tests?\nAlso, I think some java docs could help understand better the aim of the components (at least for public methods)",
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "90ce094a_c0d03eb1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2020-07-03T10:06:47Z",
      "side": 1,
      "message": "It\u0027s already tested with PullReplicationIT.java",
      "parentUuid": "4173ee3b_7ae0b8b4",
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "411628bc_f656c613",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/Source.java",
        "patchSetId": 2
      },
      "lineNbr": 402,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2020-07-03T08:53:03Z",
      "side": 1,
      "message": "here too, what\u0027s the reason for swapping these two lines?",
      "range": {
        "startLine": 401,
        "startChar": 0,
        "endLine": 402,
        "endChar": 76
      },
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b3d2e218_3a5ed378",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/Source.java",
        "patchSetId": 2
      },
      "lineNbr": 402,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2020-07-03T10:06:47Z",
      "side": 1,
      "message": "that one is tricky, it\u0027s a race condition I\u0027ve spent some time to figure out that. When we have `now` set to true or getDelay returns 0. We do not wait and we run the task immediately, if you check Source.requestRunway(FetchOne) we are removing task from pending as a first operation when task is starting. But  without delay task will be added to pending when it\u0027s already running and will never be removed from pending which cause further replication to stuck. We have the same problem in replication plugin I will create a separate ticket for it.",
      "parentUuid": "411628bc_f656c613",
      "range": {
        "startLine": 401,
        "startChar": 0,
        "endLine": 402,
        "endChar": 76
      },
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4ac14649_5bbf48e3",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/Source.java",
        "patchSetId": 2
      },
      "lineNbr": 402,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2020-07-06T07:10:08Z",
      "side": 1,
      "message": "oh wow! that\u0027s interesting, it must have been a tricky to find.\nShould we consider having this as a separate change though? strictly speaking it is not related to the nativee git implementation.\n\nIn fact, it sounds so critical that I\u0027d have a separate monorail for it with the steps to reproduce.\nWDYT?",
      "parentUuid": "b3d2e218_3a5ed378",
      "range": {
        "startLine": 401,
        "startChar": 0,
        "endLine": 402,
        "endChar": 76
      },
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5f1327e9_f14e8f2f",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/Source.java",
        "patchSetId": 2
      },
      "lineNbr": 402,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2020-07-06T20:54:52Z",
      "side": 1,
      "message": "Done https://gerrit-review.googlesource.com/c/plugins/pull-replication/+/274534",
      "parentUuid": "4ac14649_5bbf48e3",
      "range": {
        "startLine": 401,
        "startChar": 0,
        "endLine": 402,
        "endChar": 76
      },
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "365ced77_e1427fbe",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/api/FetchCommand.java",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2020-07-03T08:53:03Z",
      "side": 1,
      "message": "What\u0027s the reason for swapping these two lines? is it intentional?",
      "range": {
        "startLine": 62,
        "startChar": 0,
        "endLine": 63,
        "endChar": 75
      },
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "00396b88_5a7364e8",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/api/FetchCommand.java",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2020-07-03T10:06:47Z",
      "side": 1,
      "message": "Yes It\u0027s the same reason - race condition(but this one is theoretical). To trigger task cleanup `allScheduled` must be set to true and it\u0027s done in markAllFetchTaskScheduled. So if the task is quick it will finish before markAllFetchTaskScheduled and notificatyFinished will not clean up task properly",
      "parentUuid": "365ced77_e1427fbe",
      "range": {
        "startLine": 62,
        "startChar": 0,
        "endLine": 63,
        "endChar": 75
      },
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "74e5c739_04dec245",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/api/FetchCommand.java",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2020-07-06T07:10:08Z",
      "side": 1,
      "message": "I understand. Again, perhaps this is worth be tackled as a separate issue?",
      "parentUuid": "00396b88_5a7364e8",
      "range": {
        "startLine": 62,
        "startChar": 0,
        "endLine": 63,
        "endChar": 75
      },
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c7e9f332_3feb51f3",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/fetch/Fetch.java",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2020-07-03T08:53:03Z",
      "side": 1,
      "message": "2020?",
      "range": {
        "startLine": 1,
        "startChar": 17,
        "endLine": 1,
        "endChar": 21
      },
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6c7861e2_a2ba48cd",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/fetch/Fetch.java",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2020-07-03T10:06:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c7e9f332_3feb51f3",
      "range": {
        "startLine": 1,
        "startChar": 17,
        "endLine": 1,
        "endChar": 21
      },
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "de54a7de_f39eba95",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/fetch/Fetch.java",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2020-07-03T08:53:03Z",
      "side": 1,
      "message": "nit: this looks like a functional interface, we could annotate it as such:\nhttp://baddotrobot.com/blog/2014/04/07/functional-interfaces-in-java8",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 23,
        "endChar": 1
      },
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "94c5006d_25ab6d7b",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/fetch/Fetch.java",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2020-07-03T10:06:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "de54a7de_f39eba95",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 23,
        "endChar": 1
      },
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5acb1187_7a9e2e1a",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/fetch/FetchFactory.java",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2020-07-03T08:53:03Z",
      "side": 1,
      "message": "2020",
      "range": {
        "startLine": 1,
        "startChar": 17,
        "endLine": 1,
        "endChar": 21
      },
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "71d6bde8_4e393e1c",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/fetch/FetchFactory.java",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2020-07-03T10:06:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5acb1187_7a9e2e1a",
      "range": {
        "startLine": 1,
        "startChar": 17,
        "endLine": 1,
        "endChar": 21
      },
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "72df9ede_f034d7bf",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/fetch/FetchFactory.java",
        "patchSetId": 2
      },
      "lineNbr": 22,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2020-07-03T08:53:03Z",
      "side": 1,
      "message": "nit: FunctionalInterface",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 22,
        "endChar": 1
      },
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "da57c1b7_0e8eec1c",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/fetch/FetchFactory.java",
        "patchSetId": 2
      },
      "lineNbr": 22,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2020-07-03T10:06:47Z",
      "side": 1,
      "message": "I\u0027m not sure that this is an FunctionalInterface it\u0027s an implementation of assisted factory https://github.com/google/guice/wiki/AssistedInject#assistedinject-in-guice-30",
      "parentUuid": "72df9ede_f034d7bf",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 22,
        "endChar": 1
      },
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e3ccd4b0_e63e69a8",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/fetch/FetchFactory.java",
        "patchSetId": 2
      },
      "lineNbr": 22,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2020-07-06T07:10:08Z",
      "side": 1,
      "message": "I think we should still be able to tell the compiler that no additional methods should be added here and that this is a Single Access Method.\nHave you tried to add the annotation? Does it break?\n\nAnyway, not a big deal if you don\u0027t want to add it",
      "parentUuid": "da57c1b7_0e8eec1c",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 22,
        "endChar": 1
      },
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "244478f1_e3ea2140",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/fetch/FetchFactory.java",
        "patchSetId": 2
      },
      "lineNbr": 22,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2020-07-06T19:35:39Z",
      "side": 1,
      "message": "Actually we can have multiple method in guice factory: https://google.github.io/guice/api-docs/latest/javadoc/index.html?com/google/inject/assistedinject/FactoryModuleBuilder.html",
      "parentUuid": "e3ccd4b0_e63e69a8",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 22,
        "endChar": 1
      },
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d3e98081_91876860",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/fetch/JGitFetch.java",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2020-07-03T08:53:03Z",
      "side": 1,
      "message": "2020",
      "range": {
        "startLine": 1,
        "startChar": 17,
        "endLine": 1,
        "endChar": 21
      },
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0b3a4156_b007d076",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/fetch/JGitFetch.java",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2020-07-03T10:06:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d3e98081_91876860",
      "range": {
        "startLine": 1,
        "startChar": 17,
        "endLine": 1,
        "endChar": 21
      },
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cccb48a0_a08be2d9",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/fetch/NativeGitFetch.java",
        "patchSetId": 2
      },
      "lineNbr": 52,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2020-07-03T08:53:03Z",
      "side": 1,
      "message": "Does this assume git is in the path?\nWhat happens if the git binary is not available/installed?\n\nShould we eperhaps fail at bind time?",
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dda56971_315abe13",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/fetch/NativeGitFetch.java",
        "patchSetId": 2
      },
      "lineNbr": 52,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2020-07-03T10:06:47Z",
      "side": 1,
      "message": "Good idea I will implement some check in the constructor",
      "parentUuid": "cccb48a0_a08be2d9",
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "54aba6ef_ae811239",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/fetch/NativeGitFetch.java",
        "patchSetId": 2
      },
      "lineNbr": 52,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2020-07-04T13:59:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dda56971_315abe13",
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "041e9025_79235eaf",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/fetch/NativeGitFetch.java",
        "patchSetId": 2
      },
      "lineNbr": 70,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2020-07-03T08:53:03Z",
      "side": 1,
      "message": "s/replicate/fetch",
      "range": {
        "startLine": 70,
        "startChar": 34,
        "endLine": 70,
        "endChar": 43
      },
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bfcebdf1_d963b38b",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/replication/pull/fetch/NativeGitFetch.java",
        "patchSetId": 2
      },
      "lineNbr": 70,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2020-07-03T10:06:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "041e9025_79235eaf",
      "range": {
        "startLine": 70,
        "startChar": 34,
        "endLine": 70,
        "endChar": 43
      },
      "revId": "8c2736726d8301369fab486acf58b73800d935b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}